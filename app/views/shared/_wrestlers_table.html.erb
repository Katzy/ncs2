<div class="ui segment">
  <table class="ui celled center aligned structured stackable table">
    <thead>
      <tr>
        <th rowspan="2">WEIGHT</th>
        <th rowspan="2">SCHOOL</th>
        <th rowspan="2">NAME </th>
        <th rowspan="2">YR</th>
        <th rowspan="2">W/L</th>
        <th colspan="3">2016 PLACES</th>
        <% if user_signed_in? && (current_user.admin? || current_user.league || current_user.school) %>
        <th rowspan="2">Edit</th>
        <th rowspan="2">Delete</th>
        <% end %>
        
      </tr>
      <tr>
        <th rowspan="1">NCS</th>
        <th rowspan="1">STATE</th>
        <th rowspan="1">LEAGUE</th>
      </tr>
    </thead>
    <tbody>
      <% @wrestlers.each do |wrestler, user| %>
          <% if wrestler.bouts %>
          <% wrestler.bouts.map { |bout| bout.win_loss == "W" ? @wins << bout : @wins } %>
          <% wrestler.bouts.map { |bout| bout.win_loss == "L" ? @losses << bout : @losses } %>  
          <% end %>            
          <tr>
            <td><%= wrestler.weight %></td>
            
            <td><%= wrestler.school.name %><br>(<%= wrestler.school.league.name %>)</td>
            <td><%= link_to wrestler.first_name + " " + wrestler.last_name, wrestler_path(wrestler) %></td>
            <td><%= wrestler.grade %></td>
            <td><%= @wins.count %>-<%= @losses.count %></td>
            <td><%= wrestler.section_place %></td>
            <td><%= wrestler.state_place %></td>
            <td><%= wrestler.league_place %></td>
            <% if user_signed_in? && (current_user.admin?) %>
              <td><%= link_to 'Edit', edit_wrestler_path(wrestler) %></td>
              <% else %>
              <td></td>
            <% end %>
            <% if user_signed_in? && (current_user.admin? ) %>
          <td><%= link_to 'Delete', wrestler, method: "delete", :data => {:confirm => 'Are you sure?'} %> </td>
          <% end %>
          </tr>
      <% end %>
    </tbody>
  </table>
</div>